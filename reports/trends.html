<!DOCTYPE html>
<html>
  <head>
    <title>Trends</title>
  </head>
  <body  onload="PopulateDropDownList(); chartFunction()">

    <h3>Trends</h3>
    <label>Share</label>
    <select id="nseList" onchange="chartFunction()"></select>
    <hr>
    <div id="chart"></div>
    <hr>

  <style>

  .axis .domain {
    display: none;
  }

  .c3-target-CMP {
    display: none;
  }

  </style>
  <script src="../js/jquery.min.js"></script>
  <script src="../js/d3.v5.min.js"></script>
  <script src="../js/c3.js"></script>
  
  <script>
    function PopulateDropDownList() {
      //Build an array containing Customer records.
      var list = ["HDFCBANK", "POWERGRID", "HEROMOTOCO", "HDFC", "MARUTI", "ITC", "NTPC", "BHARATFIN", "INDUSINDBK", "WIPRO", "MRF", "HINDUNILVR", "COLPAL", "BRITANNIA", "GRASIM", "ASIANPAINT", "LT", "RELIANCE", "EICHERMOT", "KOTAKBANK", "ACC", "MGL", "ULTRACEMCO", "ONGC", "SIEMENS", "COALINDIA", "TCS", "BAJAJ-AUTO", "TATAPOWER", "HINDZINC", "NHPC", "UPL", "TATACOMM", "CUMMINSIND", "ZEEL", "DABUR", "CASTROLIND", "TATACHEM", "BOSCHLTD", "NESTLEIND", "AMBUJACEM", "INFY", "ADANIPORTS", "APOLLOTYRE", "TITAN", "MARICO", "VOLTAS", "NMDC", "BHARATFORG", "GODREJCP", "AMARAJABAT", "PIDILITIND", "MRPL", "CESC", "LICHSGFIN", "CAPF", "KAJARIACER", "HAVELLS", "AXISBANK", "BAJAJFINSV", "RBLBANK", "PEL", "RAMCOCEM", "INFRATEL", "HCLTECH", "ENGINERSIN", "PETRONET", "CEATLTD", "INFIBEAM", "JSWSTEEL", "SHREECEM", "BHEL", "GAIL", "DRREDDY", "IDFCBANK", "IGL", "GODREJIND", "VGUARD", "EXIDEIND", "OFSS", "TATAMTRDVR", "BERGEPAINT", "PVR", "RECLTD", "MOTHERSUMI", "CENTURYTEX", "TORNTPHARM", "IDFC", "BHARTIARTL", "CIPLA", "SOUTHBANK", "ARVIND", "IBULHSGFIN", "SBIN", "TVSMOTOR", "ICICIPRULI", "DISHTV", "GLENMARK", "TATAGLOBAL", "BAJFINANCE", "ASHOKLEY", "BATAINDIA", "TATASTEEL", "MUTHOOTFIN", "SRF", "TECHM", "BIOCON", "ESCORTS", "IOC", "MANAPPURAM", "EQUITAS", "ICICIBANK", "BEL", "AUROPHARMA", "LUPIN", "APOLLOHOSP", "DALMIABHA", "DCBBANK", "TATAMOTORS", "PFC", "RAYMOND", "NBCC", "FEDERALBNK", "CHOLAFIN", "DIVISLAB", "SUNTV", "BALKRISIND", "INDIGO", "GODFRYPHLP", "JISLJALEQS", "YESBANK", "OIL", "KTKBANK", "SRTRANSFIN", "UJJIVAN", "SUNPHARMA", "BPCL", "JUBLFOOD", "AJANTPHARM", "VEDL", "KSCL", "CADILAHC", "CHENNPETRO", "HINDPETRO", "INDIACEM", "GSFC", "KPIT", "TATAELXSI", "PAGEIND", "PTC", "RELCAPITAL", "HINDALCO", "TORNTPOWER", "REPCOHOME", "UBL", "IRB", "CANFINHOME", "IFCI", "DHFL", "IDEA", "BANKBARODA", "MCX", "WOCKPHARMA", "MFSL", "GRANULES", "RELINFRA", "PNB", "SYNDIBANK", "JETAIRWAYS", "NCC", "TV18BRDCST", "UNIONBANK", "INDIANB", "SREINFRA", "CGPOWER", "ADANIPOWER", "BEML", "CANBK", "JINDALSTEL", "ORIENTBANK", "ANDHRABANK", "SAIL", "NATIONALUM", "GMRINFRA", "RPOWER", "BANKINDIA", "ADANIENT", "ALBK", "STAR", "SUZLON", "HEXAWARE", "HCC", "IDBI", "BALRAMCHIN", "JUSTDIAL", "RNAVAL", "JPASSOCIAT", "PCJEWELLER", "RCOM", "CONCOR"];

      var nseList = $("#nseList");
      var count = 1
      $(list).each(function () {
          var option = $("<option />");

          //Set Customer Name in Text part.
          option.html(count.toString() + ":" + this);
          count += 1

          //Add the Option element to DropDownList.
          nseList.append(option);
      });
    }
    function chartFunction() {
      var share = document.getElementById("nseList").value.split(":")[1];
      var chart = c3.generate({
        data: {
            x: 'Date',
            url: '../data/' + share +'.csv',
            type: 'bar'
        },
        tooltip:{
          order: null
        },
        axis: {
          x: {
            type: 'categorized',
            show: false
          },
          y2: {
            show: true,
          },
          y: {
            min: -10,
            max:  10
          }
        },
        axes: {
            CMP: 'y2',

        },
        bar: {
          width: {
            ratio: 0.3,
          },
        }
      });
    }
  </script>

  </body>
</html>
