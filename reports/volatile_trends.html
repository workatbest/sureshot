<!DOCTYPE html>
<html>
  <head>
    <title>Volatile Trends</title>
  </head>
  <body  onload="PopulateDropDownList(); chartFunction()">

    <h3>Volatile Trends</h3>

    <label>Share</label>
    <select id="nseList" onchange="chartFunction()"></select>
    <label id="stdev"></label>
    <script>
      
    </script>
    <hr>
    <div id="chart"></div>
    <hr>

  <style>

  .axis .domain {
    display: none;
  }

  .c3-target-Close{
    display: none;
  }

  #stdev {
    float: right;
  }


  </style>
  <script src="../js/jquery.min.js"></script>
  <script src="../js/d3.v5.min.js"></script>
  <script src="../js/c3.js"></script>
  
  <script>
    function PopulateDropDownList() {
      //Build an array containing Customer records.
      var list = ["HDFCBANK", "POWERGRID", "COLPAL", "BRITANNIA", "HINDUNILVR", "ITC", "MARUTI", "HDFC", "NTPC", "KOTAKBANK", "ASIANPAINT", "WIPRO", "INDUSINDBK", "HEROMOTOCO", "DABUR", "RBLBANK", "LT", "NESTLEIND", "BHARATFIN", "MARICO", "TCS", "ZEEL", "PIDILITIND", "RELIANCE", "MRF", "ULTRACEMCO", "OFSS", "BOSCHLTD", "TATACHEM", "GODREJCP", "BAJAJ-AUTO", "EICHERMOT", "INFY", "ONGC", "HCLTECH", "COALINDIA", "NHPC", "APOLLOTYRE", "LICHSGFIN", "SHREECEM", "AMBUJACEM", "SIEMENS", "CUMMINSIND", "CASTROLIND", "EXIDEIND", "GLENMARK", "ACC", "KAJARIACER", "GRASIM", "TATAPOWER", "BAJAJFINSV", "CIPLA", "ADANIPORTS", "BATAINDIA", "RAMCOCEM", "GODREJIND", "CESC", "BERGEPAINT", "HINDZINC", "TATACOMM", "BHARATFORG", "PEL", "TORNTPHARM", "TECHM", "TVSMOTOR", "YESBANK", "GAIL", "MOTHERSUMI", "AMARAJABAT", "HAVELLS", "TATAELXSI", "ICICIPRULI", "CHOLAFIN", "MGL", "AUROPHARMA", "PETRONET", "AXISBANK", "DALMIABHA", "OIL", "JSWSTEEL", "IBULHSGFIN", "INFRATEL", "CADILAHC", "NMDC", "VOLTAS", "IOC", "BAJFINANCE", "APOLLOHOSP", "IGL", "ICICIBANK", "TATASTEEL", "TATAMOTORS", "TATAMTRDVR", "ENGINERSIN", "MFSL", "EQUITAS", "LUPIN", "BHEL", "UPL", "JUBLFOOD", "CAPF", "CHENNPETRO", "BHARTIARTL", "BPCL", "CEATLTD", "SUNPHARMA", "CENTURYTEX", "DCBBANK", "IDFC", "PAGEIND", "INDIGO", "DRREDDY", "VGUARD", "IDFCBANK", "BALKRISIND", "TITAN", "REPCOHOME", "ARVIND", "ESCORTS", "VEDL", "FEDERALBNK", "PVR", "AJANTPHARM", "DISHTV", "MUTHOOTFIN", "NBCC", "GODFRYPHLP", "HINDALCO", "BEL", "SRF", "UJJIVAN", "UBL", "KTKBANK", "RAYMOND", "MCX", "MRPL", "DHFL", "ASHOKLEY", "KSCL", "SUNTV", "KPIT", "PTC", "RECLTD", "PFC", "IRB", "SRTRANSFIN", "TORNTPOWER", "BIOCON", "DIVISLAB", "HINDPETRO", "TATAGLOBAL", "SBIN", "SOUTHBANK", "RELINFRA", "MANAPPURAM", "CANFINHOME", "GSFC", "WOCKPHARMA", "INDIACEM", "HEXAWARE", "GRANULES", "INFIBEAM", "SUZLON", "TV18BRDCST", "CGPOWER", "NATIONALUM", "BEML", "JISLJALEQS", "ALBK", "IFCI", "ANDHRABANK", "INDIANB", "NCC", "SREINFRA", "IDEA", "RELCAPITAL", "SAIL", "RPOWER", "SYNDIBANK", "BALRAMCHIN", "BANKBARODA", "STAR", "ORIENTBANK", "JETAIRWAYS", "UNIONBANK", "JINDALSTEL", "CANBK", "GMRINFRA", "BANKINDIA", "ADANIENT", "IDBI", "ADANIPOWER", "JUSTDIAL", "PNB", "HCC", "RNAVAL", "JPASSOCIAT", "RCOM", "PCJEWELLER"];

      var nseList = $("#nseList");
      var count = 1
      $(list).each(function () {
          var option = $("<option />");

          //Set Customer Name in Text part.
          option.html(count.toString() + ":" + this);
          count += 1

          //Add the Option element to DropDownList.
          nseList.append(option);
      });
    }
    function chartFunction() {
      var share = document.getElementById("nseList").value.split(":")[1];
      $.getJSON( "../volatile_data/summary.json", function( data ) {
        var items = [];
        $.each( data, function( key, val ) {
          if (val[0] == share) {
            document.getElementById("stdev").innerHTML = "STDEV : " + val[1];
          }
        });
       
        $( "<ul/>", {
          "class": "my-new-list",
          html: items.join( "" )
        }).appendTo( "body" );
      });
      var chart = c3.generate({
        data: {
            x: 'Date',
            url: '../volatile_data/' + share +'.csv',
            type: 'bar'
        },
        tooltip:{
          order: null
        },
        axis: {
          x: {
            type: 'categorized',
            show: false
          },
          y2: {
            show: true,
          },
          y: {
            min: -10,
            max:  10
          }
        },
        axes: {
          Close: 'y2',
        },
        bar: {
          width: {
            ratio: 0.3,
          },
        }
      });
    }
  </script>

  </body>
</html>
